<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TB PHASE: Simulation Machine Code User Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TB PHASE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__e___t_b__p_h_a_s_e__physical__robot__experiment__experiments__python__model__event__driven__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Simulation Machine Code User Guide </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
runSimulation</h1>
<p >The central hub for all the code for running the robot control simulation. Works alongside all other files in the 'Experiments/Python Model Event Driven' directory. All agents are simulated in this script. Agents are added and removed with commands from the robot server via ROS. Real world robots are avatars of these agents.</p>
<p >The <a class="el" href="namespacerun_simulation.html">runSimulation</a> agent control framework is a state machine. The user is able to change the state of the state machine via the <a class="el" href="_state_controller_8py.html">StateController.py</a> user interface, or by sending the appropriate commands to the appropriate ROS topics.</p>
<p ><a class="el" href="namespacerun_simulation.html">runSimulation</a> loads a default json configuration file to describe the parameters for each experiment trial. The config file is loaded upon initialisation and defines a behaviours such as agent repulsion forces, simulation space dimensions, and whether a local or real world simulation should be run.</p>
<p >TO USE:</p>
<p >Run '<a class="el" href="run_simulation_8py.html">runSimulation.py</a>' by command line with the python interpreter on a linux system.</p>
<pre class="fragment">'python3 runSimulation.py'
</pre><p> Now launch '<a class="el" href="_state_controller_8py.html">StateController.py</a>' from another terminal.</p>
<pre class="fragment">'python3 StateController.py'
</pre> <h1><a class="anchor" id="autotoc_md2"></a>
StateController</h1>
<p >The User Interface for setting the state machine's state in <a class="el" href="namespacerun_simulation.html">runSimulation</a>, as well as sending commands.</p>
<p >In <a class="el" href="namespace_state_controller.html">StateController</a>, the user is able to iterate through all trial setup steps - sending agents (and by extension physical robots) to their startup positions defined in the current configuration file.</p>
<p >The user is able to set all active agents to standby, as well as change the current configuration file.</p>
<p >TO USE:</p>
<p >Run '<a class="el" href="run_simulation_8py.html">runSimulation.py</a>' by command line with the python interpreter on a linux system (if it is not already running). eg 'python3 <a class="el" href="run_simulation_8py.html">runSimulation.py</a>'</p>
<p >Now launch '<a class="el" href="_state_controller_8py.html">StateController.py</a>' from another terminal. 'python3 <a class="el" href="_state_controller_8py.html">StateController.py</a>'</p>
<p >WARNING: Only click the 'add agent' button if the simulation is running locally, denoted with the configuration file flags: 'event_driven_lock_movements' and 'event_driven' being set to false.</p>
<p >For local simulations: </p><pre class="fragment">Click the 'add agent' button until the desired number of agents has been added.
Click 'setup start and sheep' to assign agent roles based on configuration file. Sheep will make their way to destination with pathfinding.
Once sheep are in position, click 'dog setup loop'.
Once dogs are in position, click 'pig setup loop'. Pigs are defined as any excess agents that are not needed for the current experiment.
Once pigs are in position, click 'standby setup loop' for all standby agents (potential dogs) to be sent to their positions.
Once all are in position, click the 'experiment' button.

To change the configuration file, you must first click 'set all agents to standby', optionally followed by the standby setup loop.
Type the name of the new configuration file (minus the .json extension) to the text field and click 'set new JSON'.
</pre><p> For physical robot experiments: </p><pre class="fragment">Wait until all physical robots are registered and have appeared on screen.
Click the 'add agent' button until the desired number of agents has been added.
Click 'setup start and sheep' to assign agent roles based on configuration file. Sheep will make their way to destination with pathfinding.
Once sheep are in position, click 'dog setup loop'.
Once dogs are in position, click 'pig setup loop'. Pigs are defined as any excess agents that are not needed for the current experiment.
Once pigs are in position, click 'standby setup loop' for all standby agents (potential dogs) to be sent to their positions.
Once all are in position, click the 'experiment' button.

To change the configuration file, you must first click 'set all agents to standby', optionally followed by the standby setup loop.
Type the name of the new configuration file (minus the .json extension) to the text field and click 'set new JSON'.
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
